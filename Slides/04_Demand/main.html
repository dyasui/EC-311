<!DOCTYPE html>
<html lang="en"><head>
<script src="main_files/libs/clipboard/clipboard.min.js"></script>
<script src="main_files/libs/quarto-html/tabby.min.js"></script>
<script src="main_files/libs/quarto-html/popper.min.js"></script>
<script src="main_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="main_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="main_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="main_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="main_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.294">

  <meta name="author" content="Jose Rojas-Fallas">
  <meta name="dcterms.date" content="2024-01-01">
  <title>Demand</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="main_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="main_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="main_files/libs/revealjs/dist/theme/quarto.css">
  <link href="main_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="main_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="main_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="main_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-position="left" class="quarto-title-block center">
  <h1 class="title">Demand</h1>
  <p class="subtitle">EC 311 - Intermediate Microeconomics</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jose Rojas-Fallas 
</div>
</div>
</div>

  <p class="date">2024</p>
</section>
<section class="slide level2">

<div class="vertical-center">
<p><span class="hi realbig">Outline</span></p>
<h3 id="chapter-5">Chapter 5</h3>
<ul>
<li><p>Topics</p>
<ul>
<li><p>Income Changes (5.1)</p></li>
<li><p>Price Changes (5.2)</p></li>
<li><p>Substitution and Income Effect (5.3)</p></li>
<li><p>Changes in Another Good’s Price (5.4)</p></li>
<li><p>Individual Demand <span class="math inline">\(\Rightarrow\)</span> Market Demand (5.5)</p></li>
</ul></li>
</ul>
</div>
<!--
# Applications of Micro Theory: Demand Functions {.inverse .note}


---
name: motivation
---


## There's An Actual Purpose to This

All this abstract math stuff has a purpose:

- At the start, I mentioned that firms, non-profits, and government agencies all have an incentive to model demand across every major industry

. . .

- They can ask: "If we raise the price of our product by 2%, how will our sales numbers react?"

---

## Applications 

The models used to estimate demand responses are derived from utility maximization 

For example, Dutch Bros sets up a utility that they think represents preferences for their coffee and related goods

- They can derive and estimate the associated demand function from their sales data

. . .

Up to now, we have only solved utility maximization problems with the goal of finding the [level of demand]{.hi} (aka we found [numbers]{.hi})

. . .

Now we will solve these problems without specifying either price or income

This makes it more general, which has its advantages:

::: {.incremental}
- It allows us to analyze how demand responds when prices or income change
- The math stays the same, just that we have more unknowns now
:::

---

## How Do We Find Demand Functions?

Let's begin with the workhorse of this course: Cobb-Douglas

$$\max U(x,y) = x^{\alpha}y^{\beta} \;\; \text{s.t.} \;\; P_{x} \cdot x + P_{y} \cdot y = M$$

Recall how we solve this problem:

::: {.incremental}
1. Find the MRS and set it equal to the Price Ratio

2. Solve this equality for one of the goods $\rightarrow$ Optimality Condition

3. Plug the Optimality Condition into the Budget Constraint

4. Use the found demand for one good and plug it into the Optimality Condition or Budget Constraint to find demand for the other good
:::

---

## Cobb-Douglas General Solution - Step 1

$$\max U(x,y) = x^{\alpha}y^{\beta} \;\; \text{s.t.} \;\; P_{x} \cdot x + P_{y} \cdot y = M$$

> [**Find the MRS and the Price Ratio**]{.h .note}

::: {.fragment}
$$MRS = \dfrac{MU_{x}}{MU_{y}} = \dfrac{\alpha x^{\alpha - 1 y^{\beta}}}{\beta x^{\alpha} y^{\beta - 1}} = \dfrac{\alpha}{\beta} \cdot \dfrac{x^{\alpha - 1 - \alpha}}{y^{\beta - 1 - \beta}} = \dfrac{\alpha}{\beta} \cdot \dfrac{x^{-1}}{y^{-1}} = \dfrac{\alpha}{\beta} \cdot \dfrac{y}{x}$$

$$\text{Price Ratio} = \dfrac{P_{x}}{P_{y}}$$
:::

> [**Set them equal to each other**]{.h .note}

::: {.fragment}
\begin{align*}
    \text{MRS} &= \text{Price Ratio} \\
    \dfrac{\alpha}{\beta} \cdot \dfrac{y}{x} &= \dfrac{P_{x}}{P_{y}}
\end{align*}
:::

---

## Cobb-Douglas General Solution - Step 2

$$\dfrac{\alpha}{\beta} \cdot \dfrac{y}{x} = \dfrac{P_{x}}{P_{y}}$$

> [**Solve for $y$**]{.h .note}

::: {.fragment}
\begin{align*}
    \dfrac{\alpha}{\beta} \cdot \dfrac{y}{x} &= \dfrac{P_{x}}{P_{y}} \\
    \dfrac{y}{x} &= \dfrac{P_{x}}{P_{y}} \cdot \dfrac{\beta}{\alpha} \\
    y^{*} &= \dfrac{\beta}{\alpha} \cdot \dfrac{P_{x}}{P_{y}} \cdot x
\end{align*}
:::

---

## Cobb-Douglas General Solution - Step 3

$$y^{*} = \dfrac{\beta}{\alpha} \cdot \dfrac{P_{x}}{P_{y}} \cdot x \;\; \& \;\; \text{BC: } P_{x} \cdot x + P_{y} \cdot y = M$$

> [**Solve for the Demand of good $x$**]{.h .note}

. . .

\begin{align*}
M &= P_{x} \cdot x + P_{y} \cdot y \\
M &= P_{x} \cdot x + P_{y} \cdot \left( \dfrac{\beta}{\alpha} \cdot \dfrac{P_{x}}{P_{y}} \cdot x \right) \\
M &= P_{x} \cdot x + \dfrac{\beta}{\alpha} \cdot P_{x} \cdot x \\
M &= P_{x} \cdot x \left( 1 + \dfrac{\beta}{\alpha} \right) \\
\vdots \\
x^{*} &= \dfrac{M}{P_{x}} \cdot \dfrac{\alpha}{\alpha + \beta}
\end{align*}

---

## Cobb-Douglas General Solution - Step 4

$$x^{*} = \dfrac{M}{P_{x}} \cdot \dfrac{\alpha}{\alpha + \beta}$$

>[**Use found demand of one good to find demand for the other good**]{.h .note}

. . .

\begin{align*}
    y^{*} &= \dfrac{\beta}{\alpha} \cdot \dfrac{P_{x}}{P_{y}} \cdot \color{red}{x^{*}} \\
    y^{*} &= \dfrac{\beta}{\alpha} \cdot \dfrac{P_{x}}{P_{y}} \cdot \color{red}{\dfrac{M}{P_{x}} \cdot \dfrac{\alpha}{\alpha + \beta}} \\
    y^{*} &= \dfrac{\beta}{\alpha + \beta} \cdot \dfrac{M}{P_{y}}
\end{align*}

---

## Cobb-Douglas General Solution - Trick

When $x^{*}$ and $y^{*}$ are functions, we call them [**Demand Functions**]{.h}

$$x^{*} = \dfrac{\alpha}{\alpha + \beta} \cdot \dfrac{M}{P_{x}}\;\;\;\;\;\; \& \;\;\;\;\;\; y^{*} = \dfrac{\beta}{\alpha + \beta} \cdot \dfrac{M}{P_{y}} $$

> [**Knowing a C-D utility looks like $U(x,y) = x^{\alpha} y^{\beta}$ what do you notice about these functions?**]{.h .note}

. . .

Let me show you a trick for Cobb-Douglas utility functions

::: {.incremental}
- They are a constant share of how much I can afford of each individual good

- This will always be true so you can use this to check your math in later problems
:::

::: {.notes}
If you ever use this in an exam, be sure to explain why this shortcut works (bullet point 1)
:::

---

## Demand Functions

In general, the demand for $x$ and $y$ are functions of three variables:

<br><br>

::: {.incremental}
- $P_{x}$, $P_{y}$, and $M$

- This allows us to write demand functions as:
    - $x^{*} = f(P_{x}, P_{y}, M)$
    - $y^{*} = f(P_{x}, P_{y}, M)$

- We are interested in how demand responds to changes to all three arguments
:::

---

## Techniques to Find Demand Functions

We will learn how to find Demand Functions

:::: {.columns}

::: {.column width="50%"}

[**Graphically**]{.hi}

::: {.fragment}
- Expansion Paths and Engel Curves
:::

:::

::: {.column width="50%"}

[**Mathematically**]{.hi}

::: {.fragment}
- Derivatives and Elasticities
:::

:::

::::

. . .

- We will figure out how a change in any of the function parameters affects demand for both goods

- Let's begin with [Changes to Income]{.hii}



# Income Changes {.inverse .note}


---
name: Change to Income
---


## Visualizing the Change

Let's start with a our standard optimized utility graph    

::: {.fragment}
![](Images/Inc-Change1.png){fig-align="center" width=600 height=500}
:::

. . .

What would happen if we [**Increase**]{.h} our income?

---

## Visualizing the Change

With an increase in income, our budget constraint will:

:::: {.columns}

::: {.column width="50%"}

[Shift Outward]{.hi}

::: {.fragment}
![](Images/Inc-Change2.png){fig-align="center" width=600 height=500}
:::

:::

::: {.column width="50%"}

::: {.fragment}
[We find the new Maximizing Point]{.hi}

![](Images/Inc-Change3.png){fig-align="center" width=600 height=500}
:::

:::

::::

---

## More Goods 

The previous graphs tell us 

- When income $(M)$ goes up, you can now reach a higher IC and be better off (relatively)

- This graph also makes an important assumption

::: {.incremental}
- Both goods ,$x$ and $y$, are desirable 
    - We call these [Normal Goods]{.hi}
:::

. . .

[Normal Goods]{.hi} are desirable, which simply means that if we have more income we will consume more of them

---

## Other Types of Goods?

Does it always have to be the case that consumpution of both $x$ and $y$ has to increase in response to an increase in income?

. . .

No! There are goods we call [Inferior Goods]{.hi-red} 

::: {.incremental}
- These goods are consumed less when income increases 
- A classic example of this is Maruchan ramen noodles
:::

---

## Inferior Goods - Graph

Let $y$ be an inferior good, the optimized utility graph would look something like

:::: {.columns}

::: {.column width="40%"}

[Maximized Utility]{.hi}

![](Images/Inferior-Good1.png)

:::

::: {.column width="60%"}

[Increase in Income with Inferior Good $y$]{.hi}

::: {.fragment}
![](Images/Inferior-Good2.png)
:::

:::

::::

---

## Inferior Goods - Graph Intuition

With an inferior good (let's keep saying $y$) there is a predictable shift when income increases

. . .

![](Images/Inferior-Good3.png){fig-align="center" height=500 width=600}

The new bundle must be in [this region of the budget]{.hi-purple}

---

## Can Both Goods Be Inferior?

As your income increases, can you buy less of both goods?

::: {.incremental}
- No! [Why Not?]{.h}
- The Budget Constraint does not allow it
- Recall that the BC looks like: $P_{x} \cdot x + P_{y} \cdot y = M$
:::

. . .

If your income increases, and you decrease the amount of $x$ you consume ($x$ is an inferior good), then there is a lot of income leftover that is required to be spent

The only other option is to increase your consumption of $y$

. . .

<br>

> In fact, if increasing your income has no effect on how much $x$ you consume, you would still have to increase your consumption of $y$

---

## Engel Curves

This curve describes the relationship between $M^{*}$ and $y^{*}$, with $M$ on the vertical axis and $y^{*}$ on the horizontal axis 

Let's build this by parts, starting with a bunch of income levels and the associated $y^{*}$ consumption levels 

. . .

![](Images/Engel-Curve1.png){fig-align="center" height=400 width=600}

[**Notice the axis!**]{.hi .align-center}

---

## Engel Curves

If we connect all our optimal levels of $y^{*}$ we find our [Engel Curve]{.hi}

:::: {.columns}

::: {.column width="50%"}

[Connect the dots]{.hi}

::: {.fragment}
![](Images/Engel-Curve2.png){height=450}
:::

:::

::: {.column width="50%"}

[Our Engel Curve]{.hi}

::: {.fragment}
![](Images/Engel-Curve3.png)
:::

:::

::::

---

## Engel Curves

The important thing to consider about Engel Curves is the [sign of the slope]{.h} $\rightarrow$ [It tells us if a good is normal or inferior]{.h}

::: {.incremental}
- A [Positive Slope]{.hi-green} means that when Income goes up, $y^{*}$ increases and we say $y$ is a [normal good]{.hi-green}
- A [Negative Slope]{.hp} means that when Income goes up, $y^{*}$ decreases and we say $y$ is an [inferior good]{.hp}
:::

. . .

<br>
We've seen that curves slopes can change, so we can ask ourselves:

> [Can a good be an inferior good over all income levels?]{.hi .note}

---

## Engel Curves - Inferior Goods Always?

[Can in be the case that no matter what my current income is, an increase in income will decrease my consumption of a good?]{.hi}

. . .

[It is impossible!]{.hi}

::: {.incremental}
- Even a good that is usually inferior, or better said, [inferior over common income levels must be a normal good over low enough levels of income]{.hii}
    - I'll show  you an example of an Engel Curve with a negative slope and we'll see why 
:::

---

## Engel Curves - Inferior Goods Always?

Think about our Instant Ramen example. When in college, the more money you have, the more you buy Instant Ramen (so it is a normal good). 

But once you graduate and get that promised pay increase from graduating, you buy Instant Ramen less and less the higher your Income becomes (inferior good)

. . .

![](Images/Engel-Curve4.png){fig-align="center" height="475" width="525"}

---

## Engel Curves - Mathematically

We can formalize Engel Curves as:

::: {.incremental}
1. Engel Curves are graphs of the Demand Function
    - $x^{*} = f(P_{x},P_{y},M)$
2. Where we hold prices fixed and flip the axis
:::

---

## Engel Curves - Mathematically

Take our Cobb-Douglas example

$$U(x,y) = x^{\alpha}y^{\beta} \;\;\; \text{where} \;\;\; \alpha = \beta = P_{x} = 1$$

Also recall that

$$x^{*} = \dfrac{\alpha}{\alpha + \beta} \cdot \dfrac{M}{P_{x}}$$

. . .

:::: {.columns}

::: {.column width="50%"}
Solving for $M$ yields:

::: {.fragment}
\begin{align*}
    x^{*} &= \dfrac{\alpha}{\alpha + \beta} \cdot \dfrac{M}{P_{x}} \\
    x^{*} &= \dfrac{1}{2} \cdot M = \dfrac{M}{2} \\
    x^{*} &= \dfrac{M}{2} \rightarrow M = 2x^{*}
\end{align*}
::: 

:::

::: {.column width="50%"}

What's the slope of this demand tell us?

::: {.fragment}
\begin{align*}
    \dfrac{\partial x}{\partial M} = \dfrac{1}{2} > 0
\end{align*}
:::

::: {.fragment}
[It's positive!]{.hi .align-center}
:::

:::

::::

::: {.notes}
C-D will never have an inferior good
:::

---

## Engel Curves - Using Derivatives

We can show whether a good is normal or not over all income levels by taking the derivative with respect to $M$

<br><br>
$$\text{if} \;\; \dfrac{\partial x^{*}}{\partial M} > 0 \Rightarrow \text{Normal Good}$$

<br><br>

$$\text{if} \;\; \dfrac{\partial x^{*}}{\partial M} < 0 \Rightarrow \text{Inferior Good}$$

---

## Back to Income Changes

We just saw that we can find whether a good is a normal or inferior by taking the partial derivative of the demand function w.r.t. income 

- By knowing what category the good falls into, we can quickly estimate how demand will react to changes in income
- But this only tells us up or down, not magnitudes
<br>
- To find that, we will look at [elasticities]{.hi}

---

## Elasticities 

They tell us how responsive demand is to income changes (later we will see price changes)

They follow the formula:

$$E_{x^{*},M} = \dfrac{\partial x^{*}}{\partial M} \cdot \dfrac{M}{x^{*}}$$

. . .

There are 3 steps to finding an elasticity

::: {.incremental}
1. Take the partial derivative of the good w.r.t. $M$

2. Multiply the partial derivative by the ratio of the [input variable]{.hii} to the [response variable]{.hi}
    - [What is changing]{.hii} to [what we are estimating to chagne]{.hi}

3. Substitute the original demand equation and simplify
:::

---

## Elasticities - Example

Let the Demand for $x^{*}$ be:

$$x^{*} = \dfrac{M}{P_{x}}$$

> [1 - Take the partial derivative w.r.t. Income]{.h .note}

. . .

\begin{align*}
    \dfrac{\partial x}{\partial M} = \dfrac{1}{P_{x}}
\end{align*}

---

## Elasticities - Example

The partial derivative is:

$$\dfrac{\partial x}{\partial M} = \dfrac{1}{P_{x}}$$

> [2 - Multiply the partial derivative by the ratio of input variable to the response variable $\left(\dfrac{M}{x^{*}} \right)$]{.h .note}

. . . 

\begin{align*}
    E_{x^{*},M} = \dfrac{\partial x^{*}}{\partial M} \cdot \dfrac{M}{x^{*}} \rightarrow \dfrac{1}{P_{x}} \cdot \dfrac{M}{x^{*}}
\end{align*}

---

## Elasticities - Example 

$$
E_{x^{*},M} = \dfrac{\partial x^{*}}{\partial M} \cdot \dfrac{M}{x^{*}} \rightarrow \dfrac{1}{P_{x}} \cdot \dfrac{M}{x^{*}}
$$

> [3 - Substitute the original demand equation in and simplify]{.h .note}

. . .

\begin{align*}
    E_{x^{*},M} &= \dfrac{1}{P_{x}} \cdot \dfrac{M}{\color{red}{x}} = \dfrac{1}{P_{x}} \cdot \dfrac{M}{\color{red}{\dfrac{M}{P_{x}}}} = \dfrac{1}{P_{x}} \cdot P_{x} = \dfrac{P_{x}}{P_{x}} = 1
\end{align*}

. . .

So we would say that good $x$ has an Income Elasticity of 1

---

## Elasticities: What do They Mean?

They tell us how to translate a proportional change in $x$ into a proportional change in $y$

So for the elasticity 

$$E_{x,y} = \eta $$

<br>
If $y$ goes up by $10\%$, $x$ increases by $\eta \cdot 10\%$

Equivalently, if $y$ goes down by $20\%$, $x$ decreases by $\eta \cdot 20\%$

. . .

Elasticities can be

- Positive, negative, zero, or infinite

. . .

When considering Income Elasticities we know that 

- Normal goods have positive elasticities

- Inferior goods have negative elastiticies

---

## Elasticities: Responsiveness

We can describe how responsive goods are in terms of elasiticity

::: {.incremental}
- If the [**absolute value**]{.h .note} of an elasticity is [greater than 1 $(> 1)$]{.hi} we say that there is an [**elastic**]{.hi} response
    - $E_{x,M} = 2 \rightarrow M \uparrow 10\%, \; x \uparrow 20\%$

- If the [**absolute value**]{.h .note} of an elasticity is [less than 1 $(<1)$]{.hi} we say that there is an [**inelastic**]{.hi} response 
    - $E_{x,M} = 0.5 \rightarrow M \uparrow 10\%, \; x \uparrow 5\%$

- If the [**absolute value**]{.h .note} of an elasticity is [equal to 1 $(=1)$]{.hi} we say that the response is [**unit elastic**]{.hi}

- If the elastiscity is [exactly equal to 0]{.hi} we call this [**perfectly inelastic**]{.hi}

- If the elasticity is [infinite $(\infty)$]{.hi} we call this [**perfectly elastic**]{.hi}
:::

::: {.notes}
Make drawing of perfectly inelastic and perfectly elastic on whiteboard
:::



# Own Price Changes {.inverse .note}


---
name: own price changes 
---


## Price Changes are Important 

Changing the price of a good and seeing what changes that causes is one of the most important types of changes we can consider

- This is what people in the real world most want to know about

. . .

An important thing to have in mind throughout this section is:

- If you hear/read "Demand Curve" or "Elasticity" without specifying if it's about price or income, [**the default is Own-Price Elasticity**]{.h}

---

## Price Changes

Let's recall an important effect of price changes on the Budget Constraint

> [**What happens to the Budget Constraint when then price of a normal good $x$ falls?**]{.h .note}

. . .

:::: {.columns}

::: {.column width="30%"}

[What happens to the slope?]{.hi .align-center}

::: {.fragment}
$$\dfrac{-P_{x}}{P_{y}} \; \rightarrow \; \downarrow P_{x} \; \rightarrow \; ???$$
:::

:::

::: {.column width="70%"}

[Graph]{.hi .align-center}

::: {.fragment}
![](Images/Price-Offer-Curve1.png){fig-align="center" height="400" width="500"}
:::

:::

::::

---

## Individual Demand 

Similar to the Engel Curve, we can connect these optimal bundles to get an important curve

. . .

![](Images/Price-Offer-Curve2.png){fig-align="center" width="600" height="500"}

This is an [Individual Demand Curve]{.hi} 

---

## Individual Demand Curve

If we clean it up a bit, we get our typical [downward sloping Demand Curve]{.hi}

![](Images/Ind-Demand-Curve.png){fig-align="center" width="550" height="450"}

[Notice I changed the axis slightly: I put Price on the vertical axis and Quantity of $x$ demanded on the horizontal axis]{.hi}

---

## Income Changes (Again) 

If you recall from EC 201 we learned about demand shifters when income increases.

If we repeat this exercise with an increased income we can observe the [Demand Shift]{.hi} 

:::: {.columns}

::: {.column width="50%"}
![](Images/Demand-Shift1.png)
:::

::: {.column width="50%"}
![](Images/Demand-Shift2.png){height="400"}
:::

::::

---

## Individual Demand (Mathematically)

As we have done before, we also show the [Demand Curve Properties]{.hi} through derivatives!

Let's show that the Demand Curve is downward sloping

. . .

- First, recall that the optimal consumption for a normal good $y$ from a Cobb-Douglas Utility Function is:

$$
    y^{*} = \dfrac{\beta}{\alpha + \beta} \cdot \dfrac{M}{P_{y}} = \dfrac{\beta M}{\alpha + \beta} \cdot P_{y}^{-1}
$$

. . .

- Second, we take the [derivative w.r.t. Price]{.hi}

$$
    \dfrac{\partial y}{\partial P_{y}} = \dfrac{\beta M}{\alpha + \beta} \cdot (-1)P_{y}^{-2} = \dfrac{-\beta M}{\alpha + \beta} \cdot P_{y}^{-2} = \dfrac{-\beta M}{\alpha + \beta} \cdot \dfrac{1}{P_{y}^{2}} < 0 
$$

::: {.notes}
C-D behaves as expected, the demand curve is downward sloping
:::

---

## Price Elasticity

This concept is identical to income elasticity 

I will refer to the [Elasticity of Demand]{.hi} as the [elasticity of $x$ with respect to $P_{x}$]{.hi}

. . .

The formula is

$$
    E_{x^{*},P_{x}} = \dfrac{\partial x^{*}}{\partial P_{x}} \cdot \dfrac{P_{x}}{x^{*}}  \;\; \text{where} \;\; x^{*} = \dfrac{M}{2P_{x}}
$$

---

## Elasticity of Demand - Example

Let 

$$
    E_{x^{*},P_{x}} = \dfrac{\partial x^{*}}{\partial P_{x}} \cdot \dfrac{P_{x}}{x^{*}}  \;\; \text{where} \;\; x^{*} = \dfrac{M}{2P_{x}}
$$

. . .

> [Find $\;\; \dfrac{\partial x^{*}}{\partial P_{x}}$]{.hi .note}

. . .

$$
    \dfrac{\partial x^{*}}{\partial P_{x}} = \dfrac{-M}{2P_{x}^{2}}
$$

. . .

> [Plug in our known values to the elasticity formula]{.hi .note}

. . .

$$
    E_{x^{*},P_{x}} = \dfrac{-M}{2P_{x}^{2}} \cdot \dfrac{P_{x}}{\color{red}{x}} = \dfrac{-M}{2P_{x}^{2}} \cdot \dfrac{P_{x}}{\color{red}{\dfrac{-M}{2P_{x}^{2}}}} = \dfrac{-P_{x}}{P_{x}} = -1
$$

---

## Elasticity of Demand - Example 2

$$
    y^{*} = \dfrac{M}{P_{y}} - 10
$$

. . .

> [Find $\;\; \dfrac{\partial x^{*}}{\partial P_{x}}$]{.hi .note}

. . .

$$
    \dfrac{\partial y^{*}}{\partial P_{y}} = \dfrac{-M}{P_{y}^{2}}
$$

> [Plug in our known values to the elasticity formula]{.hi .note}

. . .

$$
    E_{y^{*}, P_{y}} = \dfrac{-M}{M - 10 P_{y}}
$$

---

## Changes in Quantity Demanded 

There are two major driving factors in changes in quantity when price changes: 

::: {.incremental}
1. Change that results from a change in the relative price of the two goods $\rightarrow$ [Substitution Effect]{.hi}
2. Change that results from a change in the purchasing power of the consumer's income $\rightarrow$ [Income Effect]{.hi} 
:::

. . .

However, we [**cannot**]{.hi-red} observe both of these in the real world 

We observed the [**combined**]{.hi-teal} effect of these two 

So we have:

. . .

$$
    \text{Total Effect} = \text{Substitution Effect} + \text{Income Effect}
$$



# Substitution and Income Effect {.inverse .note}


---
name: sub & inc effect
---


## Substitution effect {.smaller}

It is the change in bundle resulting from a change in the relative price of two goods

[The relative price of both goods is simply the slope of the Budget Constraint]{.hi} 

::: {.incremental}
- Suppose that $P_{y}$ decreases by some $\epsilon$ so that $\hat{P_{y}} = P_{y} - \epsilon$

    - How would this change the Budget Constraint?

    - $\text{Slope: } \dfrac{-P_{x}}{P_{y}} \;\; \rightarrow \;\;\downarrow P_{y} \;\; \rightarrow \;\; \text{Slope gets Steeper}$
:::

. . .

![](Images/Sub-Effect1.png){fig-align="center" height="300" width="400"}

---

## Forcing No Change in Relative Income {.smaller}


:::: {.columns}

::: {.column width="50%"}
[Change in Relative Income]{.hi .align-center}
![](Images/Sub-Effect1.png){height="400" fig-align="center"}
:::

::: {.column width="50%"}

::: {.fragment}
[We can try to balance things out]{.hi .align-center}

![](Images/Sub-Effect2.png){height="380" fig-align="center"}
:::

:::

::::

. . .

> The goal is to find where the consumer [**does not**]{.h} feel wealthier or poorer given the change in relative prices

---

## Substitution Effect

> [We want to find where the consumer feels **indifferent** after price changes?]{.hi .note}

- We need to find a bundle on the same [**Indifference Curve**]{.hi} but using a new Budget Constraint

. . .

### Finding the Substitution Effect

::: {.incremental .small}
1. Find the [New Budget Constraint]{.hi}
2. Find the [Hypothetical Budget Constraint]{.hi}
3. Find the [Optimal Bundle under Original Utility and Hypothetical BC]{.hi}
4. Find the [Difference between Hypothetical and Original Bundles]{.hi}
:::

---

## Finding the Substitution Effect - Step 1

[**Let's say $P_{y}$ decreased. Find the New Budget Constraint**]{.hi .align-center .big}

![](Images/Sub-Effect3.png){fig-align="center" height="500"}

---

## Finding the Substitution Effect - Step 2

[**Find the Hypothetical Budget Constraint**]{.hi .align-center .big}

![](Images/Sub-Effect4.png){fig-align="center" height="500"}

[We figuratively grab the new BC and shift it over]{.hi} 

---

## Finding the Substitution Effect - Step 3 

[**Find the Optimal Bundle under Original Utility and Hypothetical**]{.hi .align-center .big}

![](Images/Sub-Effect5.png){fig-align="center" height="500"}

---

## Finding the Substitution Effect - Step 4

[**Find the Difference between Hypothetical and Original Bundles**]{.hi .align-center .big} 

![](Images/Sub-Effect6.png){fig-align="center"}

. . .

[The Substitution Effect is the movement from $\; A \;$ to $\; \hat{A} \;$]{.hi .big .align-center}

---

## Substitution Effect - Example

[Find the Substitution Effect of the following graph]{.hi .big .align-center}

![](Images/Sub-Effect-Example1.png){fig-align="center"}

---

## Substitution Effect - Example Solution

[Find the Substitution Effect of the following graph]{.hi .big .align-center}

![](Images/Sub-Effect-Example2.png){fig-align="center"}

---

## Income Effect {.smaller  }

It is the change in bundle resulting from a change in the purchasing power of the consumer's income 

- The relative income (purchasing power) can change even when income does not

. . .

> [We want to find the change in consumption from an increase in purchasing power if the relative prices were always at the new ratio]{.hi} 

![](Images/Inc-Effect1.png){height="350" fig-align="center"}

---

## Finding the Income Effect

::: {.incremental}
1. Find the [New Budget Constraint & the Optimal Bundle]{.hi}
2. Find the [Hypothetical Budget Constraint]{.hi} 
3. Find the [Optimal Bundle under Original Utility and Hypothetical Budget Constraint]{.hi}
4. Find the [Difference between Hypothetical and New Bundle]{.hi}
:::

. . .

<br>

> [Luckily it is a lot of the same steps so it is not a lot of extra work]{.h .note}

---

## Finding the Income Effect - Step 1

[Find the New Budget Constraint & the Optimal Bundle]{.hi .big .align-center}

![](Images/Inc-Effect2.png){fig-align="center" height="500"}

--- 

## Finding the Income Effect - Step 2

[Find the Hypothethical Budget Constraint]{.hi .big .align-center}

![](Images/Inc-Effect3.png){fig-align="center" height="500"}

---

## Finding the Income Effect - Step 3

[Find the Optimal Bundle under Original Utility and Hypothetical Budget Constraint]{.hi .big .align-center}

![](Images/Inc-Effect4.png){fig-align="center" height="490"}

---

## Finding the Income Effect - Step 4

[Find the Difference Between Hypothetical and New Bundle]{.hi .big .align-center}

![](Images/Inc-Effect5.png){fig-align="center" height="500"}

---

## Substitution and Income Effect Summary

The [Substitution Effect]{.hi-teal} is the effect of changing the slope of the budget line [without changing the indifference curve you started on]{.hi-teal}

The [Income Effect]{.hi-purple} is the difference between the [Substitution Effect]{.hi-teal} and the [new utility maximizing point]{.hi-purple} 

![](Images/Sub&Inc-Effect.png){fig-align="center" height="400"}

---

## Total Effect

> [Remember: In the real world we can only observe the Total Effect]{.hi}

![](Images/Total-Effect.png){fig-align="center"}

[We try to decompose what drives people decisions and that's how we arrive at the Sub & Inc Effects]{.h .note}



# Changes in Another Good's Price {.inverse .note}

-->
</section>
<section>
<section id="individual-demand-rightarrow-market-demand" class="title-slide slide level1 inverse note center">
<h1>Individual Demand <span class="math inline">\(\Rightarrow\)</span> Market Demand</h1>

</section>
<section id="up-to-now" class="slide level2">
<h2>Up to Now</h2>
<p>All the work we have done until now has been to understand and characterize where demand for a good comes from at an <span class="h">individual level</span></p>
<div class="fragment">
<p><br></p>
<p>But now, we want to talk about how <span class="hi">markets behave and where prices come from</span></p>
<p><br></p>
<p>To do so, we need a measure of <span class="hi">Aggregate or Market Demand</span></p>
</div>
</section>
<section id="market-demand" class="slide level2">
<h2>Market Demand</h2>
<p>We will begin by assuming the following demand function for <span class="hi">ONE</span> consumer in a market</p>
<p><span class="math display">\[
    x^{*} = f(P_{x},M) = M - P_{x}
\]</span></p>
<div class="fragment">
<p>If I said that this market was made up of 2 consumers with <span class="hi">identical utility functions</span> and incomes how can I get market demand?</p>
</div>
<div class="fragment">
<ul>
<li>Add them up</li>
</ul>
<div class="fragment">
<ul>
<li>Market Demand <span class="math inline">\((Q_{D})\)</span> is the <span class="hi">sum</span> of all individual demands</li>
</ul>
<p><span class="math display">\[
    Q_{D} = x^{*} + x^{*} = 2x^{*} \; \rightarrow \; 2(M - P_{x}) = 2M - 2P_{x}
\]</span></p>
</div>
</div>
</section>
<section id="market-demand---graphically" class="slide level2">
<h2>Market Demand - Graphically</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p><span class="hi-green">Individual Demand</span></p>
<p><span class="hi-green"><span class="math display">\[\begin{align*}
x^{*} &amp;= M - P_{x} \\
P_{x} &amp;= M - x^{*}
\end{align*}\]</span></span></p>
<p><br></p>
<p><span class="hi-orange">Market Demand</span></p>
<p><span class="hi-orange"><span class="math display">\[\begin{align*}
Q_{D} &amp;= 2M - 2P_{x} \\
2P_{x} &amp;= 2M - Q_{D} \\
P_{x} &amp;= M - \dfrac{Q_{D}}{2}
\end{align*}\]</span></span></p>
</div><div class="column" style="width:70%;">
<div class="fragment">
<p><img data-src="Images/Market-Demand1.png"></p>
</div>
</div>
</div>
</section>
<section id="lets-make-it-more-complicated" class="slide level2">
<h2>Let’s Make It More Complicated</h2>
<p>We will call our 2 agents Jose and Maria</p>
<p>Now we will assume the same demand <span class="math inline">\(x^{*} = M - P_{x}\)</span> but they have different incomes <span class="math inline">\((M)\)</span>:</p>
<ul>
<li><p>Jose has <span class="math inline">\(M = 6\)</span></p></li>
<li><p>Maria has <span class="math inline">\(M = 10\)</span></p></li>
</ul>
<p>It is still the case that market demand is the sum of both individuals</p>
<div class="fragment">
<p><span class="math display">\[
    Q_{D} = x^{*}_{J} + x^{*}_{M} = 10 - P_{x} + 6 - P_{x} = 16 - 2P_{x}
\]</span></p>
<p><span class="hp align-center">But there is an issue here!</span></p>
<aside class="notes">
<p>What is it?</p>
<p>Once <span class="math inline">\(P_{x} \geq 6\)</span>, Jose demands 0 and only Maria is left in the market</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="complicated-market-demand" class="slide level2">
<h2>Complicated Market Demand</h2>
<div class="columns tiny">
<div class="column" style="width:30%;">
<p><span class="h">Individual Demands</span></p>
<p><span class="blue"><span class="math display">\[\begin{align*}
x^{*}_{J} &amp;= 6 - P_{x} \\
P_{x} &amp;= 6 - x^{*}_{J}
\end{align*}\]</span></span></p>
<p><span class="hi-green"><span class="math display">\[\begin{align*}
x^{*}_{M} &amp;= 10 - P_{x} \\
P_{x} &amp;= 10 - x^{*}_{M}
\end{align*}\]</span></span></p>
<p><br></p>
<p><span class="hi-orange">Market Demand</span></p>
<p><span class="hi-orange"><span class="math display">\[\begin{align*}
Q_{D} &amp;= 16 - 2P_{x} \\
2P_{x} &amp;= 16 - Q_{D} \\
P_{x} &amp;= 8 - \dfrac{Q_{D}}{2}
\end{align*}\]</span></span></p>
</div><div class="column" style="width:70%;">
<div class="fragment">
<p><img data-src="Images/Market-Demand2.png"></p>
</div>
</div>
</div>
</section>
<section id="market-demand-1" class="slide level2">
<h2>Market Demand</h2>
<p>Whenever you add up <span class="h">linear demand curves</span> across individuals with <span class="h">different <span class="math inline">\(P_{x}\)</span> intercepts</span> in the demand curves, you will get a small kink in the market demand function</p>
<div class="fragment">
<p><br><br></p>
<blockquote>
<p><span class="h note">Note: The only linear demand curves we have are Perfect Substitutes and Quasi-linear so you should be able to identify them</span></p>
</blockquote>
</div>
</section>
<section id="market-demand---example-2" class="slide level2">
<h2>Market Demand - Example 2</h2>
<p>Let there be 2 agents with the following utilities</p>
<p><span class="math display">\[
U_{a} = ln(x) + y \;\;\;\; \&amp; \;\;\;\; U_{b} = 2ln(x) + y \;\;\; ; \;\;\; P_{y} = 1
\]</span></p>
<blockquote>
<p><span class="h note">Find the market demand curve (Hint: Find <span class="math inline">\(x_{a}^{*}\)</span> and <span class="math inline">\(x_{b}^{*}\)</span>)</span></p>
</blockquote>
<div class="fragment">
<p><span class="math display">\[\begin{align*}
    x_{a}^{*} &amp;\; : \; MRS = \dfrac{P_{x}}{P_{y}} \; \rightarrow \; \dfrac{MU_{x}}{MU_{y}} = \dfrac{P_{x}}{1} \; \rightarrow \; \dfrac{1}{x^{*}_{a}} = P_{x} \; \rightarrow \; x^{*}_{a} = \dfrac{1}{P_{x}} \\
    x_{b}^{*} &amp;\; : \; MRS = \dfrac{P_{x}}{P_{y}} \; \rightarrow \; \dfrac{MU_{x}}{MU_{y}} = \dfrac{P_{x}}{1} \; \rightarrow \; \dfrac{2}{x^{*}_{b}} = P_{x} \; \rightarrow \; x^{*}_{b} = \dfrac{2}{P_{x}}
\end{align*}\]</span></p>
</div>
<div class="fragment">
<p><span class="math display">\[\begin{align*}
    Q_{D} &amp;\; : \; x^{*}_{a} + x^{*}_{b} = \dfrac{1}{P_{x}} + \dfrac{2}{P_{x}} = \dfrac{3}{P_{x}} \; \rightarrow \; Q_{D} = \dfrac{3}{P_{x}} \; \rightarrow \; P_{x} = \dfrac{3}{Q_{D}}
\end{align*}\]</span></p>
</div>
</section>
<section id="market-demand---example-2-graph" class="slide level2">
<h2>Market Demand - Example 2 Graph</h2>
<div class="columns tiny">
<div class="column" style="width:30%;">
<p><span class="h">Individual Demand Functions</span></p>
<p><span class="blue"><span class="math display">\[\begin{align*}
P_{x} = \dfrac{1}{x^{*}_{a}}
\end{align*}\]</span></span></p>
<p><span class="hi-green"><span class="math display">\[\begin{align*}
P_{x} = \dfrac{2}{x^{*}_{b}}
\end{align*}\]</span></span></p>
<p><br></p>
<p><span class="hi-orange">Market Demand Function</span></p>
<p><span class="hi-orange"><span class="math display">\[\begin{align*}
P_{x} = \dfrac{3}{Q_{D}}
\end{align*}\]</span></span></p>
</div><div class="column" style="width:70%;">
<div class="fragment">
<p><img data-src="Images/Market-Demand3.png"></p>
</div>
</div>
</div>
</section>
<section id="consumer-theory" class="slide level2">
<h2>Consumer Theory</h2>
<p>All we have seen up to now is the basics of <span class="hi">Consumer Theory</span></p>
<p>A quick example of an application can be:</p>
<div>
<ul>
<li class="fragment">Let’s say you are interested in the demand for energy drinks</li>
<li class="fragment">You build utility functions for a couple different groups in the market that you believe represent their preferences for energy drinks and other consumption</li>
<li class="fragment">You solve the maximization problem and understand how the optimal solutions change when inputs change</li>
<li class="fragment">Then you add up the solutions across groups in the market to measure the relationsihp between price and demand</li>
</ul>
</div>
<div class="footer footer-default">
<p>EC311 - Lecture 04 | Demand</p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="main_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="main_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="main_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="main_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="main_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="main_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="main_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="main_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="main_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="main_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>